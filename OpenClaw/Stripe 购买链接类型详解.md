# Stripe è´­ä¹°é“¾æ¥ç±»å‹è¯¦è§£

> åˆ›å»ºæ—¶é—´ï¼š2026-02-20  
> æ ‡ç­¾ï¼š#Stripe #æ”¯ä»˜ #è®¢é˜… #ç”µå•† #OpenClaw

---

## ğŸ“Œ æ ¸å¿ƒæ¦‚å¿µ

Stripe æœ‰ä¸¤ç§**é“¾æ¥ç»´åº¦**ï¼Œå®¹æ˜“æ··æ·†ï¼š

| ç»´åº¦       | ç±»å‹ 1           | ç±»å‹ 2                |
| -------- | -------------- | ------------------- |
| **é“¾æ¥ç”¨é€”** | å‘ç¥¨é“¾æ¥ (Invoice) | Payment Link (äº§å“é“¾æ¥) |
| **ä»˜è´¹æ–¹å¼** | ä¸€æ¬¡æ€§ (One-time) | è®¢é˜… (Recurring)      |

---

## ğŸ”— ç»´åº¦ 1ï¼šé“¾æ¥ç”¨é€”

### 1ï¸âƒ£ å‘ç¥¨é“¾æ¥ (Invoice Link)

**ç‰¹ç‚¹ï¼š**
- âŒ **ä¸€æ¬¡æ€§ä½¿ç”¨** - åªèƒ½ç»™ç‰¹å®šå®¢æˆ·ç”¨ä¸€æ¬¡
- ğŸ¯ **é’ˆå¯¹ç‰¹å®šå®¢æˆ·** - å®¢æˆ·ä¿¡æ¯å·²é¢„å…ˆåˆ›å»º
- ğŸ“§ **å…ˆä¸‹å•åä»˜æ¬¾** - ä½ åˆ›å»ºè®¢é˜… â†’ ç”Ÿæˆå‘ç¥¨ â†’ å‘é€é“¾æ¥

**æµç¨‹ï¼š**
```
ä½ åˆ›å»ºå®¢æˆ· â†’ åˆ›å»ºè®¢é˜… â†’ ç”Ÿæˆå‘ç¥¨ â†’ å‘é€é“¾æ¥ â†’ å®¢æˆ·ä»˜æ¬¾
```

**é€‚ç”¨åœºæ™¯ï¼š**
- B2B ä¸šåŠ¡ï¼ˆå…ˆå‡ºè´¦å•ï¼‰
- æ‰‹åŠ¨ç»™å®¢æˆ·å¼€é€š
- å·²æœ‰å®¢æˆ·çš„ç»­è´¹
- éœ€è¦å®šåˆ¶é‡‘é¢/æŠ˜æ‰£

**ç¤ºä¾‹é“¾æ¥ï¼š**
```
https://invoice.stripe.com/i/acct_XXX/live_YYY?s=ap
```

---

### 2ï¸âƒ£ Payment Link (äº§å“é“¾æ¥) â­ æ¨è

**ç‰¹ç‚¹ï¼š**
- âœ… **æ— é™æ¬¡ä½¿ç”¨** - å¤šå°‘äººç‚¹å‡»éƒ½å¯ä»¥ä¹°
- ğŸ‘¤ **å®¢æˆ·è‡ªåŠ©** - å®¢æˆ·è‡ªå·±å¡«å†™ä¿¡æ¯
- ğŸ›’ **å³ç‚¹å³ä¹°** - ç‚¹å‡» â†’ å¡«å†™ â†’ ä»˜æ¬¾ â†’ å®Œæˆ

**æµç¨‹ï¼š**
```
ä½ åˆ›å»ºäº§å“é“¾æ¥ â†’ å‘ç»™å®¢æˆ·/æ”¾ç½‘ç«™ â†’ å®¢æˆ·ç‚¹å‡» â†’ è‡ªåŠ©è´­ä¹°
```

**é€‚ç”¨åœºæ™¯ï¼š**
- ç½‘ç«™ä¸Šçš„"è®¢é˜…"æŒ‰é’®
- ç¤¾äº¤åª’ä½“æ¨å¹¿
- æ–°å®¢æˆ·è‡ªåŠ©è´­ä¹°
- æ ‡å‡†åŒ–äº§å“

**ç¤ºä¾‹é“¾æ¥ï¼š**
```
https://buy.stripe.com/6oU28qcB4cbkb9o9h6bEA03
```

---

## ğŸ’° ç»´åº¦ 2ï¼šä»˜è´¹æ–¹å¼

### 1ï¸âƒ£ ä¸€æ¬¡æ€§äº§å“ (One-time)

**ç‰¹ç‚¹ï¼š**
- âœ… **åªä»˜ä¸€æ¬¡é’±** - æ²¡æœ‰åç»­æ‰£æ¬¾
- ğŸ“¦ **ä¹°æ–­åˆ¶** - äº¤æ˜“å®Œæˆå°±ç»“æŸ
- ğŸ **é€‚åˆå®ä½“å•†å“/å•æ¬¡æœåŠ¡**

**ä¾‹å­ï¼š**
- ä¹°ä¸€ä»¶ T æ¤
- ä¹°ä¸€ä¸ªç”µå­ä¸‹è½½
- ä¹°ä¸€æ¬¡å’¨è¯¢æœåŠ¡
- å•æ¬¡æŠ¥å‘Šè´­ä¹°

**Stripe è®¾ç½®ï¼š**
```bash
curl -X POST "https://gateway.maton.ai/stripe/v1/prices" \
  -d "product=prod_XXX" \
  -d "unit_amount=1000" \
  -d "currency=usd"
  # ä¸åŠ  recurring å‚æ•° = ä¸€æ¬¡æ€§
```

**ä»·æ ¼ç±»å‹ï¼š** `"type": "one_time"`

---

### 2ï¸âƒ£ è®¢é˜…äº§å“ (Recurring/Subscription)

**ç‰¹ç‚¹ï¼š**
- ğŸ”„ **å®šæœŸè‡ªåŠ¨æ‰£æ¬¾** - æ¯æœˆ/æ¯å¹´æŒç»­æ‰£
- ğŸ’³ **æŒç»­æ”¶å…¥** - ç¨³å®šç°é‡‘æµ
- ğŸ“… **é€‚åˆæŒç»­æœåŠ¡**

**ä¾‹å­ï¼š**
- Netflix ä¼šå‘˜
- å¥èº«æˆ¿æœˆå¡
- SaaS è½¯ä»¶
- é‡‘èæŠ¥å‘Šè®¢é˜…

**Stripe è®¾ç½®ï¼š**
```bash
curl -X POST "https://gateway.maton.ai/stripe/v1/prices" \
  -d "product=prod_XXX" \
  -d "unit_amount=1000" \
  -d "currency=usd" \
  -d "recurring[interval]=month"  # â† è¿™ä¸ªå‚æ•°è®©å®ƒå˜æˆè®¢é˜…
```

**ä»·æ ¼ç±»å‹ï¼š** `"type": "recurring"`

---

## ğŸ“Š å®Œæ•´å¯¹æ¯”è¡¨

| ç»„åˆ    | é“¾æ¥ç±»å‹         | ä»˜è´¹æ–¹å¼ | ä½¿ç”¨æ¬¡æ•° | åç»­æ‰£æ¬¾ | é€‚åˆåœºæ™¯        |
| ----- | ------------ | ---- | ---- | ---- | ----------- |
| **A** | å‘ç¥¨é“¾æ¥         | ä¸€æ¬¡æ€§  | 1 æ¬¡  | âŒ    | B2B å•æ¬¡äº¤æ˜“    |
| **B** | å‘ç¥¨é“¾æ¥         | è®¢é˜…   | 1 æ¬¡  | âœ…    | B2B è®¢é˜…æœåŠ¡    |
| **C** | Payment Link | ä¸€æ¬¡æ€§  | æ— é™   | âŒ    | ç”µå•†é›¶å”®        |
| **D** | Payment Link | è®¢é˜…   | æ— é™   | âœ…    | SaaS/ä¼šå‘˜æœåŠ¡ â­ |

---

## ğŸ¯ å®é™…ä¾‹å­

### åœºæ™¯ Aï¼šé‡‘èæŠ¥å‘Šè®¢é˜…ï¼ˆä½ çš„æƒ…å†µï¼‰

**åˆ›å»ºè®¢é˜…äº§å“çš„ Payment Linkï¼š**

```bash
# 1. åˆ›å»ºäº§å“
curl -X POST "https://gateway.maton.ai/stripe/v1/products" \
  -d "name=é‡‘èæŠ¥å‘Šè®¢é˜…&description=æ¯æ—¥é‡‘èåˆ†ææŠ¥å‘Š"

# 2. åˆ›å»ºè®¢é˜…ä»·æ ¼
curl -X POST "https://gateway.maton.ai/stripe/v1/prices" \
  -d "product=prod_XXX" \
  -d "unit_amount=1000" \
  -d "currency=usd" \
  -d "recurring[interval]=month"

# 3. åˆ›å»º Payment Link
curl -X POST "https://gateway.maton.ai/stripe/v1/payment_links" \
  -d "line_items[0][price]=price_XXX&line_items[0][quantity]=1"
```

**ç»“æœï¼š**
- é“¾æ¥ï¼š`https://buy.stripe.com/xxx`
- å¤šå°‘äººä¹°éƒ½è¡Œ
- æ¯äººæ¯æœˆè‡ªåŠ¨æ‰£$10

---

### åœºæ™¯ Bï¼šå•æ¬¡æŠ¥å‘Šè´­ä¹°

**åˆ›å»ºä¸€æ¬¡æ€§äº§å“çš„ Payment Linkï¼š**

```bash
# 1. åˆ›å»ºäº§å“ï¼ˆåŒä¸€ä¸ªäº§å“ï¼‰
# äº§å“ ID: prod_XXX

# 2. åˆ›å»ºä¸€æ¬¡æ€§ä»·æ ¼
curl -X POST "https://gateway.maton.ai/stripe/v1/prices" \
  -d "product=prod_XXX" \
  -d "unit_amount=1000" \
  -d "currency=usd"
  # æ³¨æ„ï¼šæ²¡æœ‰ recurring å‚æ•°

# 3. åˆ›å»º Payment Link
curl -X POST "https://gateway.maton.ai/stripe/v1/payment_links" \
  -d "line_items[0][price]=price_YYY&line_items[0][quantity]=1"
```

**ç»“æœï¼š**
- é“¾æ¥ï¼š`https://buy.stripe.com/yyy`
- å¤šå°‘äººä¹°éƒ½è¡Œ
- æ¯äººåªä»˜ä¸€æ¬¡$10ï¼Œæ— åç»­æ‰£æ¬¾

---

## ğŸ” å¦‚ä½•åŒºåˆ†é“¾æ¥ç±»å‹

### çœ‹é“¾æ¥ URL

| é“¾æ¥å‰ç¼€ | ç±»å‹ |
|---------|------|
| `https://invoice.stripe.com/i/` | å‘ç¥¨é“¾æ¥ |
| `https://buy.stripe.com/` | Payment Link |

---

### çœ‹ä»·æ ¼è¯¦æƒ…

**ä¸€æ¬¡æ€§ä»·æ ¼ï¼š**
```json
{
  "type": "one_time",
  "recurring": null
}
```

**è®¢é˜…ä»·æ ¼ï¼š**
```json
{
  "type": "recurring",
  "recurring": {
    "interval": "month",
    "interval_count": 1
  }
}
```

---

## ğŸ“‹ ç”¨æˆ·è§†è§’å¯¹æ¯”

### å‘ç¥¨é“¾æ¥

```
1. æ”¶åˆ°é‚®ä»¶/æ¶ˆæ¯ï¼š"è¿™æ˜¯æ‚¨çš„å‘ç¥¨"
2. ç‚¹å‡»é“¾æ¥
3. çœ‹åˆ°å‘ç¥¨è¯¦æƒ…ï¼ˆå·²åˆ›å»ºå¥½çš„è®¢å•ï¼‰
4. è¾“å…¥ä¿¡ç”¨å¡æ”¯ä»˜
5. å®Œæˆ
```

**æ„Ÿå—ï¼š** "è¯·æ”¯ä»˜è¿™ç¬”è´¦å•"

---

### Payment Link

```
1. çœ‹åˆ°"ç«‹å³è´­ä¹°"æŒ‰é’®
2. ç‚¹å‡»é“¾æ¥
3. çœ‹åˆ°äº§å“ä»‹ç»
4. å¡«å†™ä¿¡æ¯ + æ”¯ä»˜
5. å®Œæˆï¼ˆè‡ªåŠ¨åˆ›å»ºè®¢å•ï¼‰
```

**æ„Ÿå—ï¼š** "æˆ‘è¦ä¹°è¿™ä¸ªäº§å“"

---

## ğŸ”„ å–æ¶ˆè®¢é˜…

### å®¢æˆ·è‡ªåŠ©å–æ¶ˆï¼ˆæ¨èï¼‰

**Customer Portal é“¾æ¥ï¼š**

```bash
curl -X POST "https://gateway.maton.ai/stripe/v1/billing_portal/sessions" \
  -d "customer=cus_XXX" \
  -d "return_url=https://example.com"
```

**å®¢æˆ·å¯ä»¥ï¼š**
- âœ… å–æ¶ˆè®¢é˜…
- âœ… æ›´æ–°æ”¯ä»˜æ–¹å¼
- âœ… æŸ¥çœ‹å†å²å‘ç¥¨
- âœ… æŸ¥çœ‹è®¢é˜…è¯¦æƒ…

---

### å–æ¶ˆæ—¶æœº

| é€‰é¡¹ | è¯´æ˜ | é€‚åˆåœºæ™¯ |
|------|------|---------|
| **ç«‹å³å–æ¶ˆ** | ç«‹åˆ»åœæ­¢æœåŠ¡ | é€€æ¬¾ã€å®¢æˆ·å¼ºçƒˆè¦æ±‚ |
| **æœŸæœ«å–æ¶ˆ** | ç”¨åˆ°å‘¨æœŸç»“æŸ | æ­£å¸¸å–æ¶ˆã€ç”¨æˆ·ä½“éªŒå¥½ |

---

## ğŸ’¡ æœ€ä½³å®è·µ

### æ¨èç»„åˆ

| ä¸šåŠ¡ç±»å‹ | æ¨èç»„åˆ | åŸå›  |
|---------|---------|------|
| **SaaS è®¢é˜…** | Payment Link + è®¢é˜… | å®¢æˆ·è‡ªåŠ©ã€æŒç»­æ”¶å…¥ |
| **ç”µå•†é›¶å”®** | Payment Link + ä¸€æ¬¡æ€§ | ç®€å•ã€æ— åç»­æ‰£æ¬¾ |
| **B2B æœåŠ¡** | å‘ç¥¨é“¾æ¥ + è®¢é˜… | æ­£å¼ã€å¯å®šåˆ¶ |
| **å’¨è¯¢æœåŠ¡** | å‘ç¥¨é“¾æ¥ + ä¸€æ¬¡æ€§ | å…ˆæœåŠ¡åä»˜æ¬¾ |

---

### ç»™å®¢æˆ·å‘é€é“¾æ¥

**Payment Link æ¨¡æ¿ï¼š**
```
æ‚¨å¥½ï¼Œ

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è´­ä¹° [äº§å“åç§°]ï¼š
https://buy.stripe.com/xxx

ä»·æ ¼ï¼š$10/æœˆ
éšæ—¶å¯ä»¥å–æ¶ˆã€‚

å¦‚æœ‰é—®é¢˜è¯·è”ç³»æˆ‘ã€‚
```

**Customer Portal æ¨¡æ¿ï¼š**
```
æ‚¨å¥½ï¼Œ

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥ç®¡ç†æ‚¨çš„è®¢é˜…ï¼š
https://billing.stripe.com/p/session/xxx

åœ¨è¿™é‡Œæ‚¨å¯ä»¥ï¼š
- æŸ¥çœ‹è®¢é˜…è¯¦æƒ…
- æ›´æ–°æ”¯ä»˜æ–¹å¼
- ä¸‹è½½å‘ç¥¨
- å–æ¶ˆè®¢é˜…
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

| æ³¨æ„ç‚¹ | è¯´æ˜ |
|-------|------|
| **æµ‹è¯•ç¯å¢ƒ** | ä½¿ç”¨æµ‹è¯• Key åˆ›å»ºæµ‹è¯•é“¾æ¥ |
| **æ­£å¼ç¯å¢ƒ** | `livemode: true` ä¼šçœŸå®æ‰£æ¬¾ |
| **è´§å¸å•ä½** | é‡‘é¢ç”¨æœ€å°å•ä½ï¼ˆ$10 = 1000 centsï¼‰ |
| **å–æ¶ˆæ”¿ç­–** | æ˜ç¡®å‘ŠçŸ¥å®¢æˆ·å¦‚ä½•å–æ¶ˆ |
| **ç»­è´¹æé†’** | æå‰é‚®ä»¶æé†’å³å°†ç»­è´¹ |

---

## ğŸ”— ç›¸å…³èµ„æº

| èµ„æº | é“¾æ¥ |
|------|------|
| **Stripe Dashboard** | https://dashboard.stripe.com |
| **Stripe API æ–‡æ¡£** | https://docs.stripe.com/api |
| **Payment Links æ–‡æ¡£** | https://docs.stripe.com/payment-links |
| **Customer Portal** | https://docs.stripe.com/customer-portal |
| **Maton (OAuth ä¸­é—´å±‚)** | https://maton.ai |

---

## ğŸ“ å¿«é€Ÿå‚è€ƒ

### åˆ›å»ºä¸€æ¬¡æ€§ Payment Link

```bash
# 1. åˆ›å»ºä»·æ ¼ï¼ˆä¸€æ¬¡æ€§ï¼‰
price=$(curl -X POST "https://gateway.maton.ai/stripe/v1/prices" \
  -d "product=prod_XXX" \
  -d "unit_amount=1000" \
  -d "currency=usd" | jq -r .id)

# 2. åˆ›å»ºé“¾æ¥
curl -X POST "https://gateway.maton.ai/stripe/v1/payment_links" \
  -d "line_items[0][price]=$price" | jq -r .url
```

---

### åˆ›å»ºè®¢é˜… Payment Link

```bash
# 1. åˆ›å»ºä»·æ ¼ï¼ˆè®¢é˜…ï¼‰
price=$(curl -X POST "https://gateway.maton.ai/stripe/v1/prices" \
  -d "product=prod_XXX" \
  -d "unit_amount=1000" \
  -d "currency=usd" \
  -d "recurring[interval]=month" | jq -r .id)

# 2. åˆ›å»ºé“¾æ¥
curl -X POST "https://gateway.maton.ai/stripe/v1/payment_links" \
  -d "line_items[0][price]=$price" | jq -r .url
```

---

## ğŸ’­ ç±»æ¯”ç†è§£

| ç±»æ¯” | å‘ç¥¨é“¾æ¥ | Payment Link |
|------|---------|-------------|
| **é¤å…** | åƒå®ŒåæœåŠ¡å‘˜æ‹¿æ¥è´¦å• | è‡ªåŠ¨å”®è´§æœº |
| **åŒ»é™¢** | çœ‹å®Œç—…åç¼´è´¹çª—å£ | ç½‘ä¸ŠæŒ‚å·ç¼´è´¹ |
| **æŠ¥çº¸** | æ”¶åˆ°è´¦å•åç¼´è´¹ | æŠ¥äº­ä¹°æŠ¥çº¸ |

| ç±»æ¯” | ä¸€æ¬¡æ€§ | è®¢é˜… |
|------|-------|------|
| **è§†é¢‘** | ä¹°ä¸€éƒ¨ç”µå½± | Netflix ä¼šå‘˜ |
| **è½¯ä»¶** | ä¹°æ–­è½¯ä»¶ | SaaS æœˆè´¹ |
| **å¥èº«** | ä¹°ä¸€èŠ‚ç§æ•™è¯¾ | å¥èº«æˆ¿æœˆå¡ |

---

## ğŸ“Š å†³ç­–æ ‘

```
è¦åˆ›å»ºè´­ä¹°é“¾æ¥ï¼Ÿ
    â”‚
    â”œâ”€ å®¢æˆ·å·²å­˜åœ¨ + éœ€è¦å®šåˆ¶ï¼Ÿ
    â”‚   â””â”€ ä½¿ç”¨ å‘ç¥¨é“¾æ¥
    â”‚
    â””â”€ å®¢æˆ·è‡ªåŠ©è´­ä¹°ï¼Ÿ
        â””â”€ ä½¿ç”¨ Payment Link
            â”‚
            â”œâ”€ å•æ¬¡æœåŠ¡/å•†å“ï¼Ÿ
            â”‚   â””â”€ åˆ›å»º ä¸€æ¬¡æ€§ä»·æ ¼
            â”‚
            â””â”€ æŒç»­æœåŠ¡ï¼Ÿ
                â””â”€ åˆ›å»º è®¢é˜…ä»·æ ¼
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

- **2026-02-20**: åˆå§‹ç‰ˆæœ¬ï¼Œæ•´ç† Stripe é“¾æ¥ç±»å‹å’Œä½¿ç”¨åœºæ™¯
