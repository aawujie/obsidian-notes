---
notion-id: 30478d23-e296-8017-bcec-caea579b286c
base: "[[因子投资.base]]"
Last edited time: 2026-02-11T18:43:00
Tags: []
Verification: unverified
Owner:
  - 杰 吴
---
## 一、 核心定义：总和 vs. 纯粹

在时间序列分析中，我们研究的是今天（$X_t$）**和 **过去（$X_{t-k}$）的关系。

### 1. ACF (自相关函数) —— “总相关性”

- **定义**：衡量  $X_t$ 与 $X_{t-k}$ 之间的总关联度。
- **逻辑**：它不关心这种影响是怎么传过来的。
- **例子（天气）**：今天下雨导致后天湿度高。这包括了：
    1. **直接影响**：今天的雨直接影响后天。
    2. **间接影响**：今天下雨 → 明天地面湿 → 后天湿度高。
- **公式直觉**：

$$
ACF(k) = Corr(X_t, X_{t-k})
$$

### 2. PACF (偏自相关函数) —— “纯直接相关性”

- **定义**：剔除掉中间所有变量（$X_{t-1}, ..., X_{t-k+1}$）的影响后，$X_t$ 与 $X_{t-k}$ 之间的**净**相关性。
- **逻辑**：**剔除 “传声筒” 效应。**
- **例子（传话游戏）**：A告诉B，B告诉C。
    - **ACF**：A和C的内容很像（ACF 高）。
    - **PACF**：**如果B已经把A的话全传给C了，那么A对C就没有 “独家新信息” 了（PACF ≈ 0）。**
- **数学实现**：通过**回归分析**的残差来计算。

## 二、 运行机制图解

假设我们要看 **Lag 2**（今天 t vs 后天 t+2）：

| 维度 | ACF(2) 的路径 | PACF(2) 的路径 |
| --- | --- | --- |
| **路径图** | $t → t+1 → t+2$ | $t \xrightarrow{\text{直接}} t+2 \quad (\text{屏蔽掉 } t+1 \text{ 的干扰})$ |
| **关注点** | **所有影响**的总和 | **新贡献**（独家信息） |
| **比喻** | **只要有关系，我就记录** | **除非你有我不知道的新鲜事，否则不算** |

## 三、 为什么需要它们？（模型识别神器）

这是学习 ACF/PACF 最实用的部分：**决定 AR 和 MA 模型的阶数**。

### 核心术语：

- **拖尾 (Tail-off)**：像滑梯一样缓慢下降，趋向于0。
- **截尾 (Cut-off)**：像跳崖一样突然断掉，瞬间降到0（或置信区间内）。

### 识别规则表：

| 模型               | ACF (自相关)     | PACF (偏自相关)   | 识别策略               |
| ---------------- | ------------- | ------------- | ------------------ |
| **AR(p)** (自回归)  | **拖尾** (指数衰减) | **p 阶截尾**     | 看 **PACF** 在哪一阶断掉  |
| **MA(q)** (移动平均) | **q 阶截尾**     | **拖尾** (指数衰减) | 看 **ACF** 在哪一阶断掉   |
| **ARMA** (混合)    | 拖尾            | 拖尾            | 需要更高级的准则 (AIC/BIC) |

### 举例说明：

- 如果你看到 **PACF 在 Lag 2 之后突然变成 0**，而 ACF 慢慢下降 $\rightarrow$ 这是一个 **AR(2)** 模型。
- 如果你看到 **ACF 在 Lag 1 之后突然变成 0**，而 PACF 慢慢下降 $\rightarrow$ 这是一个 **MA(1)** 模型。

## 四、数学背后的 “去噪” 逻辑

PACF 是如何做到 “剔除中间影响” 的？

1. **第一步**：用中间变量 $X_{t-1}$ 去预测 $X_t$，得到预测不准的 “残差 A”。
2. **第二步**：用中间变量 $X_{t-1}$ 去预测 $X_{t-2}$，得到预测不准的 “残差 B”。
3. **第三步**：计算 **残差 A** 和 **残差 B** 的相关性。
    - *原理*：残差代表了中间变量解释不了的部分。如果残差之间还有相关性，说明 $X_t$ 和 $X_{t-2}$ 之间有**直接**的、不经过 $X_{t-1}$ 的联系。

## 五、 总结口诀

> **ACF 看全貌，间接直接都要；**
> **PACF 剔干扰，纯粹直接才好。**
> 
> **AR 看 PACF 截尾，MA 看 ACF 截尾。**

---

### 💡 进阶思考题（练手）：

如果你正在分析股票价格，发现：

- ACF 在 Lag 1, 2, 3... 都是 0.9, 0.85, 0.81 (缓慢下降)
- PACF 在 Lag 1 是 0.9，在 Lag 2 之后直接掉到了 0.05 (截尾)

**请问：这最像是什么模型？**

*(答案：AR(1) 模型，说明今天的价格主要受昨天影响，前天的影响只是通过昨天传导过来的。)*